plugins {
    id("com.android.application")
    id("org.jetbrains.kotlin.android")
    id("com.facebook.react")
    id("ly.img.android.sdk") // VideoEditorSDK plugin
}

imglyConfig {
    modules {
        include("ui:core")
        include("ui:text")
        // include("ui:focus")
        // include("ui:frame")
        // include("ui:brush")
        include("ui:filter")
        include("ui:sticker")
        // include("ui:overlay")
        include("ui:transform")  // Required for aspect ratio transformation
        // include("ui:adjustment")
        // include("ui:video-trim")
        include("ui:video-library")
        include("ui:video-composition")
        // include("ui:audio")
        // include("ui:export")

        // Asset packs
        include("assets:font-basic")
        // include("assets:frame-basic")
        // include("assets:overlay-basic")
        include("assets:sticker-shapes")
        include("assets:sticker-emoticons")
        include("assets:filter-basic")

        // Backend
        // include("backend:serializer")
        // include("backend:sticker-smart")
    }

    // Since this is your final app module
    finalModule = true
}


react {
    autolinkLibrariesWithApp()
}

android {
    namespace "com.superstar"
    compileSdkVersion = rootProject.ext.compileSdkVersion
    ndkVersion = rootProject.ext.ndkVersion
    buildToolsVersion = rootProject.ext.buildToolsVersion

    defaultConfig {
        applicationId "com.manoranjan.superstar"
        minSdk = rootProject.ext.minSdkVersion
        targetSdk = rootProject.ext.targetSdkVersion
        versionCode = 10
        versionName = "1.0.9"
    }

    signingConfigs {
        debug {
            storeFile file("debug.keystore")
            storePassword "android"
            keyAlias "androiddebugkey"
            keyPassword "android"
        }
    }

    buildTypes {
        debug {
            signingConfig signingConfigs.debug
        }
        release {
            signingConfig signingConfigs.debug
            minifyEnabled false
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }
}

def hermesEnabled = true

dependencies {
    implementation("com.facebook.react:react-android")

    if (hermesEnabled) {
        implementation("com.facebook.react:hermes-android:0.75.4")
    } else {
        implementation("org.webkit:android-jsc:+")
    }
}